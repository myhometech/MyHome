Hereâ€™s a clear and comprehensive set of instructions for your Agent GPT to ensure your MyHome platformâ€™s database maintains appropriate encryption for each document:

â¸»

ğŸ” Agent GPT Instructions: Enforcing Proper Document Encryption in MyHome

Objective

Ensure that all documents stored in the MyHome database are encrypted in accordance with best practices for data security and privacy compliance.

â¸»

âœ… 1. Encryption Requirements
	â€¢	At Rest: All documents must be encrypted before being stored in the database or object storage (e.g., S3).
	â€¢	In Transit: Ensure TLS 1.2+ is used for all document uploads/downloads via MyHomeâ€™s web and API clients.
	â€¢	Key Management: Use a centralized Key Management Service (KMS) such as AWS KMS or GCP KMS to handle encryption key rotation and access control.

â¸»

ğŸ—ƒï¸ 2. Document Storage Design
	â€¢	Documents are stored in cloud object storage (e.g., AWS S3) with server-side encryption (SSE-S3 or SSE-KMS).
	â€¢	Only encrypted URLs or metadata should be stored in the relational database (e.g., PostgreSQL).
	â€¢	For any file content temporarily cached in memory or local storage (e.g., during OCR or tag processing), ensure itâ€™s purged post-operation.

â¸»

ğŸ” 3. Encryption Implementation Steps
	1.	Before Uploading to Storage:
	â€¢	Validate that the file meets MyHome constraints (e.g., <10MB, supported file type).
	â€¢	Use the platformâ€™s file upload service that automatically applies encryption via pre-signed URLs.
	2.	At the Database Layer:
	â€¢	Never store raw document content.
	â€¢	Store only:
	â€¢	Metadata (file name, type, upload date, tags)
	â€¢	Reference to encrypted file (S3 URL or object key)
	â€¢	Encryption context or key ID (if using SSE-KMS)
	3.	Access Control Checks:
	â€¢	Ensure only authenticated users with proper permissions can generate download links.
	â€¢	Logs all access attempts and key decrypt operations for auditing.

â¸»

ğŸ” 4. Key Rotation Policy
	â€¢	Use automatic key rotation via your cloud providerâ€™s KMS (e.g., every 12 months).
	â€¢	For manual re-encryption:
	â€¢	Periodically scan stored files.
	â€¢	Re-encrypt with the new key using KMS APIs.
	â€¢	Update the encryption metadata in the database.

â¸»

ğŸ§ª 5. Verification & Auditing
	â€¢	Implement routine integrity checks to confirm:
	â€¢	Files are encrypted.
	â€¢	Access permissions are enforced.
	â€¢	Add logging and alerts for:
	â€¢	Any unencrypted file uploads.
	â€¢	Failed encryption/decryption operations.
	â€¢	Unauthorized access attempts.

â¸»

ğŸ“Œ Compliance Notes
	â€¢	Aligns with GDPR, CCPA, and SOC 2 data encryption standards.
	â€¢	Encryption algorithm must be AES-256 or better.
	â€¢	KMS access must be restricted via IAM roles/policies.

â¸»

Let me know if this instruction should be adapted to a specific cloud environment or database stack (e.g., AWS, Azure, GCP, PostgreSQL, MongoDB).